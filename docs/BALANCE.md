# 数值平衡

## 设计理念

游戏难度曲线参考《幸运房东》，分为多个阶段，每个阶段有不同的挑战和策略重点。

---

## 难度曲线

### 阶段划分

| 阶段 | 楼层 | 设计目标 |
|------|------|----------|
| 教学期 | 1-5 | 学习基础机制，容错率高 |
| 成长期 | 6-10 | 开始构建组合，需要策略 |
| 挑战期 | 11-15 | 需要升级和协同 |
| 精通期 | 16-20 | 需要完整 Build |
| 无尽期 | 21+ | 极限挑战 |

### 租金表

| 楼层 | 租金 | 旋转 | 每转需赚 | 备注 |
|------|------|------|----------|------|
| 1 | 15 | 6 | 2.5 | 入门 |
| 2 | 20 | 6 | 3.3 | |
| 3 | 25 | 6 | 4.2 | 检查点 |
| 4 | 30 | 6 | 5.0 | |
| 5 | 35 | 6 | 5.8 | Boss |
| 6 | 43 | 5 | 8.6 | |
| 7 | 51 | 5 | 10.2 | 检查点 |
| 8 | 59 | 5 | 11.8 | |
| 9 | 67 | 5 | 13.4 | |
| 10 | 75 | 5 | 15.0 | Boss |
| 11 | 90 | 5 | 18.0 | |
| 12 | 105 | 5 | 21.0 | |
| 13 | 120 | 5 | 24.0 | |
| 14 | 135 | 5 | 27.0 | |
| 15 | 150 | 5 | 30.0 | Boss |
| 16 | 175 | 4 | 43.8 | |
| 17 | 200 | 4 | 50.0 | |
| 18 | 225 | 4 | 56.3 | |
| 19 | 250 | 4 | 62.5 | |
| 20 | 275 | 4 | 68.8 | Boss |
| 21+ | 指数 | 4 | - | 1.12x/层 |

### 公式

```lua
-- 教学期 (1-5)
rent = 10 + floor * 5

-- 成长期 (6-10)
rent = 35 + (floor - 5) * 8

-- 挑战期 (11-15)
rent = 75 + (floor - 10) * 15

-- 精通期 (16-20)
rent = 150 + (floor - 15) * 25

-- 无尽期 (21+)
rent = 275 * 1.12^(floor - 20)
```

---

## 符号价值

### 基础符号

| 符号 | 价值 | 稀有度 | 说明 |
|------|------|--------|------|
| 硬币 | 1 | 普通 | 基础收益，可升级 |
| 牛奶 | 2 | 普通 | 被猫消耗 |
| 矿石 | 2 | 普通 | 被矿工消耗 |
| 糖果 | 2 | 普通 | 被小孩消耗 |
| 香蕉 | 2 | 普通 | 被猴子消耗 |
| 花朵 | 2 | 普通 | 被太阳增益 |
| 樱桃 | 3 | 稀有 | 纯收益 |
| 珍珠 | 4 | 稀有 | 纯收益 |
| 钻石 | 8 | 史诗 | 高收益 |

### 交互符号

| 符号 | 基础 | 交互收益 | 说明 |
|------|------|----------|------|
| 猫 | 1 | +10 | 消耗相邻牛奶 |
| 矿工 | 1 | +10 | 消耗相邻矿石 |
| 小孩 | 1 | +5 | 消耗相邻糖果 |
| 猴子 | 1 | +5 | 消耗相邻香蕉 |
| 盗贼 | 0 | +3 | 消耗相邻硬币 |
| 太阳 | 0 | - | 增益相邻花朵 |

### 升级加成

| 等级 | 价值倍率 | 特殊效果 |
|------|----------|----------|
| 1 | 1x | 无 |
| 2 | 2x | 符号特定效果 |
| 3 | 3x | 更强特定效果 |

---

## 商店经济

### 价格

| 稀有度 | 购买价 | 出售价 |
|--------|--------|--------|
| 普通 | 3 | 1 |
| 稀有 | 8 | 4 |
| 史诗 | 18 | 9 |

### 价格缩放

```lua
实际价格 = 基础价格 * (1 + (楼层-1) * 0.05)
```

| 楼层 | 普通 | 稀有 | 史诗 |
|------|------|------|------|
| 1 | 3 | 8 | 18 |
| 5 | 3 | 9 | 21 |
| 10 | 4 | 11 | 26 |
| 15 | 5 | 13 | 30 |
| 20 | 5 | 15 | 35 |

### 其他费用

| 项目 | 费用 |
|------|------|
| 刷新商店 | 1 |
| 遗物 | 12+ |
| 消耗品 | 5+ |

---

## 协同系统

### 类别加成

| 类别 | 符号 | 3个 | 5个 | 7个 |
|------|------|-----|-----|-----|
| 宝石 | 硬币,珍珠,钻石 | 1.2x | 1.5x | 2.0x |
| 水果 | 樱桃,香蕉 | 1.2x | 1.5x | - |
| 动物 | 猫,猴子 | 1.15x | 1.3x | - |
| 食物 | 牛奶,糖果,香蕉 | 1.1x | 1.25x | 1.5x |

### 特殊组合

| 组合 | 需要 | 效果 |
|------|------|------|
| 猫咪套餐 | 猫+牛奶 | +5, 1.2x |
| 矿业帝国 | 矿工+矿石 | +8, 1.3x |
| 向日葵 | 花+太阳 | +3, 1.15x |

---

## 随机事件

### 触发概率

```lua
概率 = 0.2 + 楼层 * 0.05  -- 最高 70%
```

| 楼层 | 概率 |
|------|------|
| 1 | 25% |
| 5 | 45% |
| 10 | 70% |

### 事件类型

| 类型 | 权重 | 示例 |
|------|------|------|
| 正面 | 40% | 获得金币、免费符号 |
| 负面 | 30% | 失去金币、符号降级 |
| 中性 | 30% | 符号重排 |

---

## 平衡建议

### 早期 (1-5层)
- 目标: 每转 3-6 金币
- 策略: 收集基础符号，学习交互
- 商店: 买 1-2 个符号即可

### 中期 (6-10层)
- 目标: 每转 10-15 金币
- 策略: 构建交互组合，开始升级
- 商店: 寻找协同符号

### 后期 (11-15层)
- 目标: 每转 20-30 金币
- 策略: 升级核心符号，利用协同
- 商店: 精选高价值符号

### 终局 (16+层)
- 目标: 每转 40+ 金币
- 策略: 完整 Build，最大化协同
- 商店: 只买完美契合的符号

---

## 调试命令

在游戏中可用于测试平衡：

```lua
-- 在 game.lua 中添加调试
function Game:keypressed(key)
    if key == "m" then
        self.money = self.money + 100  -- 加钱
    elseif key == "n" then
        self.floor = self.floor + 1    -- 跳层
    end
end
```
